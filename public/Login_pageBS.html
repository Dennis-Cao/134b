<!DOCTYPE html>
<html lang="en">
<head>
	<title> Login Page </title>
	<meta charset="utf-8">

	<!-- viewport is user screen and the following two settings sets the user width of their screen to be default -->
	<!-- initial scale makes it so it doesn't zoom in in any special way -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<style type="text/css">
		.modal-dialog{
			background-color: lightblue;
			margin-top: 12.5%;
		}

		body{
			background-image: linear-gradient(rgba(255,255,255,0.5),rgba(255,255,255,0.5)), url("images/aaron.png");
			background-size: 100%;
		}

	</style>

	<script src="https://www.gstatic.com/firebasejs/3.7.0/firebase.js"></script>
		<script src="https://www.gstatic.com/firebasejs/3.6.10/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/3.6.10/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/3.6.10/firebase-database.js"></script>
	<script>
	  // Initialize Firebase
	  var config = {
	    apiKey: "AIzaSyBoUFCtMwn6r63MEd8pfQLTMLp_h-KLkWY",
	    authDomain: "cse-134b-103ee.firebaseapp.com",
	    databaseURL: "https://cse-134b-103ee.firebaseio.com",
	    storageBucket: "cse-134b-103ee.appspot.com",
	    messagingSenderId: "737274665905"
	  };
	  //firebase.initializeApp(config);

	  // Initialize the default app
		var defaultApp = firebase.initializeApp(config);
		console.log(typeof defaultApp); 
		console.log(defaultApp.name);  // "[DEFAULT]"

		// You can retrieve services via the defaultApp variable...
		//var defaultStorage = defaultApp.storage();
		var defaultDatabase = defaultApp.database();

		function signin() {
			var email =document.forms["thisForm"]["email"].value;
			var password = document.forms["thisForm"]["password"].value;
			firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
			  // Handle Errors here.
			  var errorCode = error.code;
			  var errorMessage = error.message;
			  if (errorCode == 'auth/invalid-email') {
			    alert('invalid email');
			  } else if(errorCode == 'auth/user-disabled') {
			  	alert('user disabled');
			  } else if(errorCode == 'auth/user-not-found') {
			  	alert('user not found');
			  } else if(errorCode == 'auth/wrong-password') {
			  	alert('wrong password');
			  } else {
			  	window.location = "https://cse-134b-103ee.firebaseapp.com/homeBS.html";
			    //alert(errorMessage);
			  }
			});
		}

	</script>


	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

</head>
<body>
	<!-- container for a responsive fixed width and container-fluid for a full width container -->
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h1 class="text-center hello"> Welcome to Fantasy Dex </h1>
			</div>

			<div class="modal-body">
				<form class="col-md-12 center-block" name="thisForm" method="POST">
					<div class="form-group">
						<input type="text" class="form-control input-lg" placeholder="User ID" name="email">
					</div>

					<div class="form-group">
						<input type="password" class="form-control input-lg" placeholder="Password" name="password">
					</div>

					<div class="form-group">
						<input type="button" class="btn btn-block btn-lg btn-primary" onclick="signin()" name ="submitvalue" value="Login">
					</div>

					<a href="register_pageBS.html"> <button class="btn btn-block btn-lg btn-primary" type="button"> Register </button> </a>
				</form>

				

				<div class="modal-footer">
					<div class="col-md-12">
					</div>
				</div>
			</div>
			<button class="btn btn-block btn-lg btn-primary" onclick = "googleSignin()">Google Signin</button>
				<script>
					var provider = new firebase.auth.GoogleAuthProvider();
					function googleSignin() {
					   firebase.auth()
					   
					   .signInWithPopup(provider).then(function(result) {
					      var token = result.credential.accessToken;
					      var user = result.user;
							
					      console.log(token)
					      console.log(user)
					      window.location = "home.html";
					   }).catch(function(error) {
					      var errorCode = error.code;
					      var errorMessage = error.message;
							
					      console.log(error.code)
					      console.log(error.message)
					      window.location = "Login_pageBS.html";
					   });
					}

				</script>
		</div>
	</div>
</body>
</html>
